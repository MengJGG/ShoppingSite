<!-- 购物网站首页 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>吉他-LuxeHarmony</title>
    <link rel="stylesheet" href="main_css.css">
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="index_guitar.css">
    <script src="../JavaResource/main.js"></script>
</head>
<body>
    <div class="sky-banner" style="cursor: pointer;"></div>
    <!-- 顶部导航栏 -->
    <div class="top-container">
        <span class="main_logo">LUXEHARMONY</span>
        <!-- 导航栏 -->
        <div class="top_guide_nav" id="top_drop_menu-container">
            <div class="header" onclick="API_jumpToPage('../WebContent/index.html')">首页
            </div>
            <div class="guitar" onclick="API_jumpToPage('../WebContent/index_guitar.html')">吉他
            </div>
            <div class="audio" onclick="API_dialog('暂未开放')">音响
            </div>
            <div class="food" onclick="API_jumpToPage('../WebContent/index_food.html')">美食
            </div>
            <div class="racket" onclick="API_jumpToPage('../WebContent/index_racket.html')">羽毛球拍
            </div>
        </div>
        <div class="search-container">

        </div>
        <div class="search-icon">
            <img src="../Resource/Img/system/clear_ico.png" id="clear" alt="X">
            <input type="text" id="search_input" placeholder="搜索...">
            <img src="../Resource/Img/system/search_ico.png" id="search" alt="搜索">
        </div>
        <!-- 登录注册 -->
        <div class="login-container">
            <img src="../Resource/Img/system/default_user_head.png" alt="">
            <div class="login_mes-container">
                <span style="cursor: default;" id="username">未登录</span>
                <section>
                    <a href="user.html" id="msg">登录</a>
                    <span style="cursor: default;">|</span>
                    <a href="user.html" id="msg">注册</a>
                </section>
            </div>
        </div>
        <script>
            const search = document.querySelector('.top-container .search-icon #search');
            const clear = document.querySelector('.top-container .search-icon #clear');
            const GuideNav = document.querySelector('.top_guide_nav');
            const searchInput = document.querySelector('.top-container .search-icon #search_input');
            // 处理外部点击的函数
            function handleOutsideClick(e) {
                // 判断点击目标是否在搜索区域外
                if (!e.target.closest('.search-icon')) {
                    // 执行关闭操作
                    search.style.transform = 'translateX(0)';
                    searchInput.style.transition = 'width 0.2s linear, transform 0.2s linear';
                    searchInput.style.width = '0rem';
                    searchInput.value = '';
                    clear.style.display = 'none';
                    GuideNav.style.display = 'flex';
                    GuideNav.style.animation = 'fade-in 0.2s ease 1 forwards';
                    searchInput.blur();
                    setTimeout(() => {
                        searchInput.style.display = 'none';
                        // 移除全局点击监听
                        document.removeEventListener('click', handleOutsideClick);
                    }, 200);
                }
            }
            
            search.addEventListener('click', function() {
                search.style.transform = 'translateX(-32rem)';
                searchInput.style.display = 'block';
                searchInput.focus();
                searchInput.style.width = '29.4rem';
                // clear缓慢显示
                clear.style.display = 'block';
                GuideNav.style.animation = 'fade-out 0.2s ease 1 forwards';
                setTimeout(() => {
                    GuideNav.style.display = 'none';
                }, 200);
                setTimeout(() => {
                    document.addEventListener('click', handleOutsideClick);  // 添加全局点击监听
                }, 300);
            });

            searchInput.addEventListener('keydown', function(e) {
                // 按下回车键，跳转到搜索结果页面
                if (e.keyCode === 13) {
                    let keyword = searchInput.value;
                    // 如果关键字为空，则不跳转
                    if (keyword === '') {
                        return;
                    }
                    localStorage.setItem("search_keyword", keyword);
                    API_jumpToPage('../WebContent/index_search.html', null, '', flag=true);
                }
            });
            clear.addEventListener('click', function() {
                search.style.transform = 'translateX(0)';
                searchInput.style.transition = 'width 0.2s linear, transform 0.2s linear'; // 添加transform的过渡
                searchInput.style.width = '0rem';
                searchInput.value = '';
                clear.style.display = 'none';
                GuideNav.style.display = 'flex';
                GuideNav.style.animation = 'fade-in 0.2s ease 1 forwards';
                searchInput.blur();
                setTimeout(() => {
                    searchInput.style.display = 'none';
                    // 清除时移除全局点击监听
                    document.removeEventListener('click', handleOutsideClick);
                }, 200);

            });
        </script>
        <!-- 下拉菜单 -->
        <div class="top_drop_menu" id="top_drop_menu-container" data-index="0">
            <div class="drop_left-content drop_content">
                <br>
                <span id="menu_title" style="color: #333333;">按类别选购</span>
                <a>吉他</a> 
                <a>音响</a>
                <a>美食</a>
                <a>羽毛球拍</a>
                <br>
            </div>
            <div class="img-container">
                <br>
                <span id="menu_title" style="color: #333333;">推荐商品</span>
                <img src="../Resource/Img/food/11.jpeg" alt="" onclick=""> <!--跳转到详细页面-->
            </div>
        </div>
        <div class="top_drop_menu" id="top_drop_menu-container" data-index="1">
            <div class="drop_left-content drop_content">
                <br>
                <span id="menu_title" style="color: #333333;">热门品牌</span>
                <a>Martin</a> 
                <a>Fender</a>
                <a>Taylor</a>
                <a>Yamaha</a>
                <br>
            </div>
            <div class="img-container">
                <br>
                <span id="menu_title" style="color: #333333;">推荐商品</span>
                <img src="http://g.search3.alicdn.com/img/i3/109964830/O1CN010fvEFy1lYC1uE8Qqf_!!4611686018427383326-0-saturn_solar.jpg" alt="" onclick=""> <!--跳转到详细页面-->
            </div>
        </div>
        <div class="top_drop_menu" id="top_drop_menu-container" data-index="2">
            <div class="drop_left-content drop_content">
                <br>
                <span id="menu_title" style="color: #333333;">热门品牌</span>
                <a>JBL</a> 
                <a>Harman Kardon</a>
                <a>Denon</a>
                <a>Sony</a> 
                <a>Dynaudio</a>
                <a>Bose</a>
                <br>
            </div>
            <div class="img-container">
                <br>
                <span id="menu_title" style="color: #333333;">推荐商品</span>
                <img src="https://cn.jbl.com/dw/image/v2/AAUJ_PRD/on/demandware.static/-/Sites-masterCatalog_Harman/default/dwc471195b/01.JBL_Live Beam 3_Product Image_Feature Screen 02_Black.png?sw=537&sfrm=png" alt="" onclick=""> <!--跳转到详细页面-->
            </div>
        </div>
        <div class="top_drop_menu" id="top_drop_menu-container" data-index="3">
            <div class="drop_left-content drop_content">
                <br>
                <span id="menu_title" style="color: #333333;">牛排系列</span>
                <a>惠灵顿牛排</a> 
                <a>烟熏牛排</a>
                <a>番茄牛排</a>
                <a>法式羊排</a>
                <a>战斧牛排</a>
                <a>西芹椒盐牛排</a>
                <a>菲力牛排</a>
                <br>
            </div>
            <div class="img-container">
                <br>
                <span id="menu_title" style="color: #333333;">推荐菜品</span>
                <img src="../Resource/Img/food/41.jpeg" alt="" onclick=""> <!--跳转到详细页面-->
            </div>
        </div>
        <div class="top_drop_menu" id="top_drop_menu-container" data-index="4">
            <div class="drop_left-content drop_content">
                <br>
                <span id="menu_title" style="color: #333333;">热门品牌</span>
                <a>尤尼克斯Yonex</a> 
                <a>李宁LI-NING</a>
                <a>威克多VICTORY</a>
                <br>
            </div>
            <div class="drop_right-content drop_content">
                <br>
                <span id="menu_title" style="color: #333333;">热门推荐</span>
                <a>ARCSABER 11 PRO</a> 
                <a>ARCSABER 7 PRO3</a>
                <a>NANOFLARE 700 PRO</a>
                <a>ASTROX 88S PRO</a> 
                <a>ASTROX 100 ZZ</a>
                <a>ASTROX 99 PRO</a>
            </div>
            <div class="img-container">
                <br>
                <span id="menu_title" style="color: #333333;">推荐商品</span>
                <img src="https://www.yonex.cn/public/uploads/20230904/bde83ff23ddde196fe2b3098ad993748.jpg" alt="" onclick=""> <!--跳转到详细页面-->
            </div>
        </div>
        </div>
        
        <!-- TODO: 后端返回数据 -->
        <script>
            'use strict';
            const topGuideNav = document.querySelector('.top_guide_nav');
            const topDropMenus = document.querySelectorAll('.top_drop_menu');
            const topDropMenuContainer = document.querySelector('#top_drop_menu-container');
            topGuideNav.addEventListener('mouseover', function(e) {
                const index = Array.from(topGuideNav.children).indexOf(e.target);
                show(index);
            });
            topDropMenus.forEach(topDropMenu => {
                topDropMenu.addEventListener('mouseleave', function() {
                    show(-1);
                });
            });

            function show(index) {
                topDropMenus.forEach(topDropMenu => {
                    if (topDropMenu.dataset.index != index) {
                        topDropMenu.style.display = 'none';
                    }
                    else {
                        topDropMenu.style.animation = 'fade-in 0.5s ease 1 forwards';
                        topDropMenu.style.display = 'flex';
                    }
                });
            }            
            
            
        </script>
    </div>
    <!-- 侧边工具栏 -->
    <div class="side_tool_bar">
        <div class="lamp" onclick=""><img src="../Resource/Img/system/lamp.png" style="width: 2.5rem; height: 2.5rem; margin-top: 5px;" alt="开关灯"></div>
        <div class="cart" onclick="API_jumpToPage('../WebContent/cart.html', null, '', flag=true)"><img src="../Resource/Img/system/cart.png" style="width: 2.4rem; height: 2.4rem; margin-top: 6px;" alt="购物车"></div>
        <div class="scroll_top" onclick="scrollToTop()"><img src="../Resource/Img/system/arrow_up.png" style="width: 2.7rem; height: 2.7rem;" alt="回到顶部"></div>
    </div>
    <script>
        const lamp = document.querySelector('.side_tool_bar .lamp');
        const cart = document.querySelector('.side_tool_bar .cart');
        const scrollTop = document.querySelector('.side_tool_bar .scroll_top');
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
    </script>
    <!-- 主要内容 -->
    <div class="main-container">
        <!-- 轮播图 -->
        <div class="carousel-container">
            <div class="carousel-track">
                <div class="carousel-item"><img src="https://www.yonex.cn/public/uploads/20230904/bde83ff23ddde196fe2b3098ad993748.jpg" alt=""></div>
                <div class="carousel-item"><img src="https://www.yonex.cn/public/uploads/20220224/3d37d74fd66ed1d06c00fbf35e2ba6e6.jpg" alt=""></div>
                <div class="carousel-item"><img src="https://www.yonex.cn/public/uploads/20240819/d0943f4dc3d450c38e495de529cdd74f.jpg" alt=""></div>
            </div>
            
            <button class="carousel-button button-prev">❮</button>
            <button class="carousel-button button-next">❯</button>
            
            <div class="carousel-indicators"></div>
        </div>
        <script>
            class Carousel {
                constructor(container) {
                    this.container = container;
                    this.track = container.querySelector('.carousel-track');
                    this.items = Array.from(container.querySelectorAll('.carousel-item'));
                    this.currentIndex = 0;
                    this.isAnimating = false;
                    this.init();  // TODO: 这里需要传入是由哪个主题的页面，从而决定播放什么
                }
    
                init() {
                    // 创建指示器
                    this.createIndicators();
        
                    // 添加事件监听
                    container.querySelector('.button-prev').addEventListener('click', () => this.slideToPrev());
                    container.querySelector('.button-next').addEventListener('click', () => this.slideToNext());

                    // 自动播放
                    this.startAutoPlay();
                }
    
                createIndicators() {
                    const indicatorsContainer = this.container.querySelector('.carousel-indicators');
                    this.items.forEach((_, index) => {
                        const indicator = document.createElement('div');
                        indicator.className = `indicator ${index === 0 ? 'active' : ''}`;
                        indicator.addEventListener('click', () => this.slideTo(index));
                        indicatorsContainer.appendChild(indicator);
                    });
                }
    
                updateIndicators() {
                    const indicators = this.container.querySelectorAll('.indicator');
                    indicators.forEach((indicator, index) => {
                        indicator.classList.toggle('active', index === this.currentIndex);
                    });
                }
    
                slideTo(index) {
                    if (this.isAnimating) return;
                    
                    this.currentIndex = (index + this.items.length) % this.items.length;
                    this.track.style.transform = `translateX(-${this.currentIndex * 100}%)`;
                    this.updateIndicators();
                    
                    this.isAnimating = true;
                    setTimeout(() => {
                        this.isAnimating = false;
                    }, 500);
                }
    
                slideToPrev() {
                    this.slideTo(this.currentIndex - 1);
                }
    
                slideToNext() {
                    this.slideTo(this.currentIndex + 1);
                }

                startAutoPlay(interval = 6000) {
                    setInterval(() => {
                        if (!document.hidden) {
                            this.slideToNext();
                        }
                    }, interval);
                }
            }
            // 初始化轮播
            const container = document.querySelector('.carousel-container');
            new Carousel(container);
        </script>
        <div></div>
        <!-- 推荐商品 -->
        <div class="recommend-container">
            <span class="recommend_title" id="title">新品推荐</span>
            <span class="change_btn">换一批</span>
            <br>
            <div class="recommend_items">
                
            </div>
            
            <script>
                let recommend_items = ["../Resource/JSONData/racket/Yonex/gongjianxilie.json",
                    "../Resource/JSONData/racket/Yonex/jiguangxilie.json",
                    "../Resource/JSONData/racket/Yonex/tianfuxilie.json",
                ];
                let recommend_goods = [];
                let loop = 0;  // 用于循环recommend_goods，当商品获取到头时，从头开始
                // 从后端获取商品数据
                recommend_goods.push(API_getGoods(1, recommend_items));  // 获取的商品添加到recommend_goods
                const recommendItems = document.querySelector('.recommend-container .recommend_items');
                for (let i = 0; i < 3; i++) {
                    recommendItems.innerHTML += `
                    <div class="item" id="item_1" data-GoodId="${recommend_goods[loop][i].id}">
                        <div class="msg">
                            <span id="s">新品上新</span>
                            <span style="margin-left: 3rem; cursor: pointer;" id="buy" data-ind="0" data-listened="false">购入</span>
                        </div>
                        <div class="good_img-container" onclick="API_jumpToPage('../WebContent/goodsDetail.html', ${recommend_goods[loop][i].id}, 'display_good', true)">
                            <img src="${recommend_goods[loop][i].image_url}" alt="" class="good_img">
                        </div>
                        <br>
                        <br>
                        <br>
                        <div class="info">
                            <span class="name">${recommend_goods[loop][i].name}</span>
                            <span class="price">${recommend_goods[loop][i].price}</span>
                        </div>
                    </div>`;
                }
                listenBuyBtns();
                
                const ChangeBtn = document.querySelector('.recommend-container .change_btn');
                ChangeBtn.addEventListener('click', function() {
                    // 为每个item添加卡片翻转动画
                    loop++;  // 循环数组+1
                    let goods = API_getGoods(1, recommend_items);
                    if (goods.length != 0) {
                        recommend_goods.push(goods);
                    }
                    if (goods.length === 0) {  // 商品到头了，从头开始
                        loop = 0;
                    }
                    // 更新翻转动画
                    const items = document.querySelectorAll('.recommend-container .recommend_items .item');
                    items.forEach(item => {
                        item.style.animation = 'flip 0.5s ease 1 forwards';
                    });
                    setTimeout(() => {
                        // 删除items所有子元素 items: NodeList
                        recommendItems.innerHTML = '';
                        for (let i = 0; i < goods.length; i++) {
                            recommendItems.innerHTML += `
                            <div class="item" id="item_1" data-GoodId="${recommend_goods[loop][i].id}">
                                <div class="msg">
                                    <span id="s">新品上新</span>
                                    <span style="margin-left: 3rem; cursor: pointer;" id="buy" data-ind="0" data-listened="false">购入</span>
                                </div>
                                <div class="good_img-container" onclick="API_jumpToPage('../WebContent/goodsDetail.html', ${recommend_goods[loop][i].id}, 'display_good', true)">
                                    <img src="${recommend_goods[loop][i].image_url}" alt="" class="good_img">
                                </div>
                                <br>
                                <br>
                                <br>
                                <div class="info">
                                    <span class="name">${recommend_goods[loop][i].name}</span>
                                    <span class="price">${recommend_goods[loop][i].price}</span>
                                </div>
                            </div>`;
                        }
                        listenBuyBtns();
                    }, 450);
                });
                
                function listenBuyBtns() {
                    const BuyBtns = document.querySelectorAll('.recommend-container .recommend_items .item .msg #buy');
                    BuyBtns.forEach(btn => {
                        // 判断btn是否已经被监听
                        if (btn.getAttribute('data-listened') == 'true') {
                            return;
                        }
                        btn.setAttribute('data-listened', 'true');
                        btn.addEventListener('click', function() {
                            // 获取其父类的id
                            const parent = btn.parentNode.parentNode;
                            const id = parent.getAttribute('data-GoodId');
                            // 加入到购物车
                            if (API_addToCart(id)) {
                                btn.style.display = 'none';
                                // 获取btn的data-ind
                                const index = parseInt(btn.getAttribute('data-ind'));
                                API_dialog("加入成功");
                            }
                        });
                    });
                }
            </script>
        </div>
        <!-- 系列展示 -->
        <span id="title">热门系列</span>
        <div class="series-container">
            <div class="box">
                <div class="images">
                    <img src="https://www.yonex.cn/public/uploads/20220224/3d37d74fd66ed1d06c00fbf35e2ba6e6.jpg" alt="">
                </div>
                <div class="content">
                    <h2>弓箭系列</h2>
                    <p>精准控制</p>
                </div>
            </div>
            <div class="box">
                <div class="images">
                    <img src="https://www.yonex.cn/public/uploads/20240819/d0943f4dc3d450c38e495de529cdd74f.jpg" alt="">
                </div>
                <div class="content">
                    <h2>极光系列系列</h2>
                    <p>速度与敏捷</p>
                </div>
            </div>
            <div class="box">
                <div class="images">
                    <img src="https://www.yonex.cn/public/uploads/20230904/bde83ff23ddde196fe2b3098ad993748.jpg" alt="">
                </div>
                <div class="content">
                    <h2>天斧系列</h2>
                    <p>力量与进攻性</p>
                </div>
            </div>
        </div>
        <br>
        <!-- 商品主要内容 4*5 -->
        <span id="title">商品展览</span>
        <br>
        <div class="good_main-container">
            <div class="good-content"></div>
            <div class="good-content"></div>
            <div class="good-content"></div>
            <div class="good-content"></div>
        </div>
        <!-- 显示更多 -->
        <div class="more_btn-container" style="cursor: pointer;">显示更多</div>
        <script>
            function listenAddBtns() {
                const addBtns = document.querySelectorAll('.good_main-container .item .add-btn');
                addBtns.forEach(btn => {
                    // 判断btn是否已经被监听
                    if (btn.getAttribute('data-listened') == 'true') {
                        return;
                    }
                    btn.addEventListener('click', function() {
                        // 添加data-listened属性，防止重复点击
                        btn.setAttribute('data-listened', 'true');
                        // 获取其父类的id
                        const parent = btn.parentNode.parentNode;
                        const id = parent.getAttribute('data-GoodId');
                        // 加入到购物车
                        if (API_addToCart(id)) {
                            btn.style.display = 'none';
                            API_dialog("加入成功");
                            btn.innerHTML = '<img src="../Resource/Img/system/bingo_ico.png" alt="" style="display: flex; width: 70%;">';
                            btn.classList.add('bingo-icon');
                        } else {
                            API_dialog("请先登录");
                        }
                    });
                });
            }

            var category_items = ["../Resource/JSONData/racket/Yonex/gongjianxilie.json",
                    "../Resource/JSONData/racket/Yonex/jiguangxilie.json",
                    "../Resource/JSONData/racket/Yonex/tianfuxilie.json"];

            const GoodContainer = document.querySelector('.good_main-container');
            const SeriesContainer = document.querySelector('.series-container');
            const GoodContent = document.querySelectorAll('.good_main-container .good-content');
            SeriesContainer.addEventListener('click', function(e) {
                // 清空good-content
                GoodContent.forEach(content => {
                    content.innerHTML = '';
                });
                const index = Array.from(e.target.parentNode.parentNode.children).indexOf(e.target.parentNode);  // 获取系列索引
                category_paths = [category_items[index]];
                API_resetGetGoodsIndex();  // 重置商品索引
                let display_goods = API_getGoods(20, category_paths);
                API_showGoods(display_goods, GoodContainer);
                listenAddBtns();
            });
            // TODO: 异步获取商品信息
            let display_goods = API_getGoods(6, category_items);  // display_goods: array of goods objects
            // 显示商品信息
            API_showGoods(display_goods, GoodContainer);

            // 显示更多
            const moreBtn = document.querySelector('.more_btn-container');
            moreBtn.addEventListener('click', function() {
                let show_more_goods = API_getGoods(6, category_items);  // show_more_goods: array
                if (show_more_goods.length == 0) {
                    API_dialog("到底了~");
                }
                API_showGoods(show_more_goods, GoodContainer);
                listenAddBtns();
            });
            listenAddBtns();
        </script>

        <!-- 底部信息栏 -->
        <br>
        <br>
        <div class="bottom-container">
            <br>
            <div class="logo">LUXEHARMONY</div>
            <span class="quick-msg">立即订阅LuxeHarmony官方时讯快报，抢先获取最新商品资讯</span>
            <!-- 输入框 -->
            <div class="input-container">
                <input type="text" placeholder="请在此处输入您的邮箱地址..." maxlength="30" autocomplete="off">
                <span id="msg">使用订阅服务，即表示您同意我们向您的邮箱地址发送LuxeHarmony官方时讯快报，</span>
                <span id="msg">并同意我们对您的个人信息的使用和保护。</span>
                <button onclick="API_subscribe()">订阅</button>

            </div>
            <br>
            <div class="help_main-container">
                <div class="left" id="items">
                    <a href="#">联系我们</a>
                    <a href="#">付款方式</a>
                    <a href="#">配送说明</a>
                    <a href="#">退货与换货</a>
                </div>
                <div class="right" id="items">
                    <a href="#">关于我们</a>
                    <a href="#">加入我们</a>
                </div>
            </div>

            <div class="copyright_msg-container">
                <span>使用条款</span>
                <span>隐私政策</span>
                <span>版本声明</span>
            </div>
            <div class="copyright">copyright © 2025 LUXEHARMONY. All rights reserved.</div>
        </div>
        <script>
            // 当有用户输入时，才显示按钮
            const input = document.querySelector('.input-container input');
            const button = document.querySelector('.input-container button');
            const msg = document.querySelectorAll('.input-container #msg');
            const helpContainer = document.querySelector('.help_main-container');
            input.addEventListener('input', function() {
                if (input.value.trim() != '') {
                    // 从上方慢慢出现
                    button.style.display = 'block';
                    msg.forEach(it => {
                        it.style.display = 'block';
                        it.style.animation = 'fade-in 0.3s ease 1 forwards';
                        it.style.transform = 'translateY(0)';
                    });
                    button.style.animation = 'fade-in 0.3s ease 1 forwards';
                    // helpContainer缓慢下降
                    helpContainer.style.transform = 'translateY(-10%)';
                    // 判断输入的内容是否为邮箱
                    const email = input.value.trim();
                    const emailRegex = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
                    if (emailRegex.test(email)) {
                        button.disabled = false;
                        button.style.cursor = 'pointer';
                        // 悬浮时按钮变色
                        button.addEventListener('mouseover', function() {
                            button.style.backgroundColor = '#1f1f1f';
                        });
                        button.addEventListener('mouseout', function() {
                            button.style.backgroundColor = '#111111';
                        });
                        button.style.backgroundColor = '#111111';
                    } else {
                        button.disabled = true;
                        button.style.cursor = 'default';
                        button.style.backgroundColor = 'gray';
                    }

                } else {
                    msg.forEach(it => {
                        it.style.animation = 'fade-out 0.3s ease 1 forwards';
                        it.style.transform = 'translateY(-10%)';
                    });
                    button.style.animation = 'fade-out 0.3s ease 1 forwards';
                    helpContainer.style.transform = 'translateY(-40%)';
                }
            });
        </script>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const topBar = document.querySelector('.top-container');
            const skyBar = document.querySelector('.sky-banner');
            const mainContainer = document.querySelector('.main-container');
            const guideMenus = document.querySelectorAll('.top_drop_menu');
            const topGuideNav = document.querySelector('.top_guide_nav');
            const loginSpan = document.querySelector('.login_mes-container #username');
            const loginSection = document.querySelector('.login_mes-container section');
            const searchIcon = document.querySelector('.search-icon #search');
            const clearIcon = document.querySelector('.search-icon #clear');
            const searchInput = document.querySelector('.search-icon #search_input');
            const topBarHeight = skyBar.offsetHeight;
            window.addEventListener('scroll', function() {
                const offset = window.pageYOffset || document.documentElement.scrollTop;

                if (offset > topBarHeight) {
                    topBar.classList.add('sticky');
                    mainContainer.style.paddingTop = 5 + 'rem';
                    moveUpDropMenu(5);
                } else {
                    topBar.classList.remove('sticky');
                    mainContainer.style.paddingTop = 0;
                    moveUpDropMenu(6.25);
                }
                // 如果页面到达底部
                console.log("gi" + offset + topBarHeight);
                if (offset + topBarHeight >= document.body.offsetHeight - 1000) {
                    for (let i = 0; i < topGuideNav.children.length; i++) {
                        topGuideNav.children[i].style.color = '#333333';
                    }
                    for (let i = 0; i < loginSection.children.length; i++) {
                        loginSection.children[i].style.color = '#333333';
                    }
                    // 获取searchInput的style的border-bottom
                    searchInput.style.borderBottom = '1px solid #333333';
                    searchIcon.src = '../Resource/Img/system/searchd_ico.png';
                    clearIcon.src = '../Resource/Img/system/cleard_ico.png';
                    loginSpan.style.color = '#333333';
                    topBar.style.transition = 'background-color 0.3s ease';
                    topBar.style.backgroundColor = '#f2f2f2';
                } else {
                    for (let i = 0; i < topGuideNav.children.length; i++) {
                        topGuideNav.children[i].style.color = '#e0e0e0';
                    }
                    for (let i = 0; i < loginSection.children.length; i++) {
                        loginSection.children[i].style.color = '#e0e0e0';
                    }
                    searchIcon.src = '../Resource/Img/system/search_ico.png';
                    clearIcon.src = '../Resource/Img/system/clear_ico.png';
                    loginSpan.style.color = '#e0e0e0';
                    topBar.style.transition = 'background-color 0.3s ease';
                    topBar.style.backgroundColor = '#111111';
                }
            });
            function moveUpDropMenu(val) {
                guideMenus.forEach(menu => {
                    menu.style.top = val + 'rem';
                });
            }
        });
    </script>
</body>
</html>